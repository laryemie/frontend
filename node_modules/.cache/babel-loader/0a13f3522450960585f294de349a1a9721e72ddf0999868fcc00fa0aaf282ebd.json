{"ast":null,"code":"// src/components/Chat.js\nimport React,{useEffect,useState,useContext}from'react';import{Container,Typography,TextField,Button,List,ListItem,ListItemText}from'@mui/material';import axios from'axios';import{useParams}from'react-router-dom';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=()=>{const{chatId}=useParams();const{user}=useContext(AuthContext);const[chat,setChat]=useState(null);const[message,setMessage]=useState('');useEffect(()=>{const fetchChat=async()=>{try{const response=await axios.get(`http://localhost:5000/api/chats/${chatId}`,{headers:{'x-auth-token':localStorage.getItem('token')}});setChat(response.data);}catch(err){console.error(err);}};fetchChat();},[chatId]);const handleSendMessage=async()=>{try{const response=await axios.post(`http://localhost:5000/api/chats/${chatId}/message`,{message},{headers:{'x-auth-token':localStorage.getItem('token')}});setChat(response.data);setMessage('');}catch(err){console.error(err);}};if(!chat)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",gutterBottom:true,children:[\"Chat with \",user.role==='client'?chat.worker.username:chat.client.username]}),/*#__PURE__*/_jsx(List,{children:chat.messages.map((msg,index)=>/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:msg.message,secondary:`From: ${msg.sender===user.id?'You':'Other'}`})},index))}),/*#__PURE__*/_jsx(TextField,{label:\"Message\",fullWidth:true,value:message,onChange:e=>setMessage(e.target.value)}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleSendMessage,style:{marginTop:'1rem'},children:\"Send\"})]});};export default Chat;","map":{"version":3,"names":["React","useEffect","useState","useContext","Container","Typography","TextField","Button","List","ListItem","ListItemText","axios","useParams","AuthContext","jsx","_jsx","jsxs","_jsxs","Chat","chatId","user","chat","setChat","message","setMessage","fetchChat","response","get","headers","localStorage","getItem","data","err","console","error","handleSendMessage","post","children","maxWidth","style","marginTop","variant","gutterBottom","role","worker","username","client","messages","map","msg","index","primary","secondary","sender","id","label","fullWidth","value","onChange","e","target","color","onClick"],"sources":["/Users/macm1/Documents/JobSkill-App/frontend/src/components/Chat.js"],"sourcesContent":["// src/components/Chat.js\nimport React, { useEffect, useState, useContext } from 'react';\nimport { Container, Typography, TextField, Button, List, ListItem, ListItemText } from '@mui/material';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\n\nconst Chat = () => {\n  const { chatId } = useParams();\n  const { user } = useContext(AuthContext);\n  const [chat, setChat] = useState(null);\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    const fetchChat = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/api/chats/${chatId}`, {\n          headers: { 'x-auth-token': localStorage.getItem('token') },\n        });\n        setChat(response.data);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchChat();\n  }, [chatId]);\n\n  const handleSendMessage = async () => {\n    try {\n      const response = await axios.post(\n        `http://localhost:5000/api/chats/${chatId}/message`,\n        { message },\n        { headers: { 'x-auth-token': localStorage.getItem('token') } }\n      );\n      setChat(response.data);\n      setMessage('');\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  if (!chat) return <div>Loading...</div>;\n\n  return (\n    <Container maxWidth=\"md\" style={{ marginTop: '2rem' }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Chat with {user.role === 'client' ? chat.worker.username : chat.client.username}\n      </Typography>\n      <List>\n        {chat.messages.map((msg, index) => (\n          <ListItem key={index}>\n            <ListItemText\n              primary={msg.message}\n              secondary={`From: ${msg.sender === user.id ? 'You' : 'Other'}`}\n            />\n          </ListItem>\n        ))}\n      </List>\n      <TextField\n        label=\"Message\"\n        fullWidth\n        value={message}\n        onChange={(e) => setMessage(e.target.value)}\n      />\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleSendMessage}\n        style={{ marginTop: '1rem' }}\n      >\n        Send\n      </Button>\n    </Container>\n  );\n};\n\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}