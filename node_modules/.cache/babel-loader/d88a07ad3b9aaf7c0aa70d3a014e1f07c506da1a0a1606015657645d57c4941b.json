{"ast":null,"code":"// src/pages/WorkerDashboard.js\nimport React,{useEffect,useState,useContext}from'react';import{Container,Typography,Grid,Card,CardContent,CardActions,Button,Avatar,TextField,Box}from'@mui/material';import axios from'axios';import{useNavigate}from'react-router-dom';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkerDashboard=()=>{const[requests,setRequests]=useState([]);const{user}=useContext(AuthContext);const navigate=useNavigate();const[requestSearch,setRequestSearch]=useState('');const[minPrice,setMinPrice]=useState('');const[maxPrice,setMaxPrice]=useState('');useEffect(()=>{const fetchRequests=async()=>{try{const response=await axios.get(`${process.env.REACT_APP_BACKEND_URL}/api/requests`,{headers:{'x-auth-token':localStorage.getItem('token')},params:{search:requestSearch,minPrice:minPrice||undefined,maxPrice:maxPrice||undefined}});setRequests(response.data);}catch(err){console.error(err);}};fetchRequests();},[requestSearch,minPrice,maxPrice]);const handleChat=async clientId=>{try{const response=await axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/chats`,{workerId:user.id},{headers:{'x-auth-token':localStorage.getItem('token')}});navigate(`/chat/${response.data._id}`);}catch(err){console.error(err);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Worker Dashboard\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Available Service Requests\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",gap:2,mb:2,children:[/*#__PURE__*/_jsx(TextField,{label:\"Search by Description\",value:requestSearch,onChange:e=>setRequestSearch(e.target.value),variant:\"outlined\",size:\"small\"}),/*#__PURE__*/_jsx(TextField,{label:\"Min Price\",type:\"number\",value:minPrice,onChange:e=>setMinPrice(e.target.value),variant:\"outlined\",size:\"small\"}),/*#__PURE__*/_jsx(TextField,{label:\"Max Price\",type:\"number\",value:maxPrice,onChange:e=>setMaxPrice(e.target.value),variant:\"outlined\",size:\"small\"})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,style:{marginTop:'1rem'},children:requests.map(request=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",mb:2,children:[/*#__PURE__*/_jsx(Avatar,{children:request.client.username[0]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{marginLeft:'1rem'},children:request.client.username})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:request.description}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"Price: $\",request.proposedPrice]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"Address: \",request.address]})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>handleChat(request.client._id),children:\"Chat with Client\"})})]})},request._id))})]});};export default WorkerDashboard;","map":{"version":3,"names":["React","useEffect","useState","useContext","Container","Typography","Grid","Card","CardContent","CardActions","Button","Avatar","TextField","Box","axios","useNavigate","AuthContext","jsx","_jsx","jsxs","_jsxs","WorkerDashboard","requests","setRequests","user","navigate","requestSearch","setRequestSearch","minPrice","setMinPrice","maxPrice","setMaxPrice","fetchRequests","response","get","process","env","REACT_APP_BACKEND_URL","headers","localStorage","getItem","params","search","undefined","data","err","console","error","handleChat","clientId","post","workerId","id","_id","maxWidth","style","marginTop","children","variant","gutterBottom","display","gap","mb","label","value","onChange","e","target","size","type","container","spacing","map","request","item","xs","sm","md","alignItems","client","username","marginLeft","description","color","proposedPrice","address","onClick"],"sources":["/Users/macm1/Documents/JobSkill-App/frontend/src/pages/WorkerDashboard.js"],"sourcesContent":["// src/pages/WorkerDashboard.js\nimport React, { useEffect, useState, useContext } from 'react';\nimport {\n  Container,\n  Typography,\n  Grid,\n  Card,\n  CardContent,\n  CardActions,\n  Button,\n  Avatar,\n  TextField,\n  Box,\n} from '@mui/material';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\n\nconst WorkerDashboard = () => {\n  const [requests, setRequests] = useState([]);\n  const { user } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const [requestSearch, setRequestSearch] = useState('');\n  const [minPrice, setMinPrice] = useState('');\n  const [maxPrice, setMaxPrice] = useState('');\n\n  useEffect(() => {\n    const fetchRequests = async () => {\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/api/requests`, {\n          headers: { 'x-auth-token': localStorage.getItem('token') },\n          params: { search: requestSearch, minPrice: minPrice || undefined, maxPrice: maxPrice || undefined },\n        });\n        setRequests(response.data);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchRequests();\n  }, [requestSearch, minPrice, maxPrice]);\n\n  const handleChat = async (clientId) => {\n    try {\n      const response = await axios.post(\n        `${process.env.REACT_APP_BACKEND_URL}/api/chats`,\n        { workerId: user.id },\n        { headers: { 'x-auth-token': localStorage.getItem('token') } }\n      );\n      navigate(`/chat/${response.data._id}`);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"lg\" style={{ marginTop: '2rem' }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Worker Dashboard\n      </Typography>\n      <Typography variant=\"h6\">Available Service Requests</Typography>\n      <Box display=\"flex\" gap={2} mb={2}>\n        <TextField\n          label=\"Search by Description\"\n          value={requestSearch}\n          onChange={(e) => setRequestSearch(e.target.value)}\n          variant=\"outlined\"\n          size=\"small\"\n        />\n        <TextField\n          label=\"Min Price\"\n          type=\"number\"\n          value={minPrice}\n          onChange={(e) => setMinPrice(e.target.value)}\n          variant=\"outlined\"\n          size=\"small\"\n        />\n        <TextField\n          label=\"Max Price\"\n          type=\"number\"\n          value={maxPrice}\n          onChange={(e) => setMaxPrice(e.target.value)}\n          variant=\"outlined\"\n          size=\"small\"\n        />\n      </Box>\n      <Grid container spacing={3} style={{ marginTop: '1rem' }}>\n        {requests.map((request) => (\n          <Grid item xs={12} sm={6} md={4} key={request._id}>\n            <Card>\n              <CardContent>\n                <Box display=\"flex\" alignItems=\"center\" mb={2}>\n                  <Avatar>{request.client.username[0]}</Avatar>\n                  <Typography variant=\"h6\" style={{ marginLeft: '1rem' }}>\n                    {request.client.username}\n                  </Typography>\n                </Box>\n                <Typography variant=\"body1\">{request.description}</Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Price: ${request.proposedPrice}\n                </Typography>\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  Address: {request.address}\n                </Typography>\n              </CardContent>\n              <CardActions>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={() => handleChat(request.client._id)}\n                >\n                  Chat with Client\n                </Button>\n              </CardActions>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n    </Container>\n  );\n};\n\nexport default WorkerDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}