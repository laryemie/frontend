{"ast":null,"code":"var _jsxFileName = \"/Users/macm1/Documents/JobSkill-App/frontend/src/components/Payment.js\",\n  _s = $RefreshSig$();\n// src/components/Payment.js\nimport React, { useState, useEffect } from 'react';\nimport { Container, Typography, Button, Alert } from '@mui/material';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Payment = ({\n  requestId,\n  amount\n}) => {\n  _s();\n  const stripe = useStripe();\n  const elements = useElements();\n  const navigate = useNavigate();\n  const [clientSecret, setClientSecret] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  useEffect(() => {\n    const fetchClientSecret = async () => {\n      try {\n        const response = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/payments/create-payment-intent`, {\n          requestId\n        }, {\n          headers: {\n            'x-auth-token': localStorage.getItem('token')\n          }\n        });\n        setClientSecret(response.data.clientSecret);\n      } catch (err) {\n        setError('Error initializing payment');\n      }\n    };\n    fetchClientSecret();\n  }, [requestId]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!stripe || !elements) return;\n    const cardElement = elements.getElement(CardElement);\n    const {\n      error,\n      paymentIntent\n    } = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: cardElement\n      }\n    });\n    if (error) {\n      setError(error.message);\n    } else if (paymentIntent.status === 'succeeded') {\n      setSuccess('Payment successful!');\n      setTimeout(() => navigate('/client-dashboard'), 2000);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    style: {\n      marginTop: '2rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"Make Payment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      children: [\"Amount: $\", amount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(CardElement, {\n        options: {\n          style: {\n            base: {\n              fontSize: '16px',\n              color: '#424770',\n              '::placeholder': {\n                color: '#aab7c4'\n              }\n            },\n            invalid: {\n              color: '#9e2146'\n            }\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        color: \"primary\",\n        fullWidth: true,\n        disabled: !stripe || !clientSecret,\n        style: {\n          marginTop: '1rem'\n        },\n        children: \"Pay\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(Payment, \"IWZ29CItTwY2c4MdmLspvVJjiPw=\", false, function () {\n  return [useStripe, useElements, useNavigate];\n});\n_c = Payment;\nexport default Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useState","useEffect","Container","Typography","Button","Alert","CardElement","useStripe","useElements","axios","useNavigate","jsxDEV","_jsxDEV","Payment","requestId","amount","_s","stripe","elements","navigate","clientSecret","setClientSecret","error","setError","success","setSuccess","fetchClientSecret","response","post","process","env","REACT_APP_BACKEND_URL","headers","localStorage","getItem","data","err","handleSubmit","e","preventDefault","cardElement","getElement","paymentIntent","confirmCardPayment","payment_method","card","message","status","setTimeout","maxWidth","style","marginTop","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","severity","onSubmit","options","base","fontSize","color","invalid","type","fullWidth","disabled","_c","$RefreshReg$"],"sources":["/Users/macm1/Documents/JobSkill-App/frontend/src/components/Payment.js"],"sourcesContent":["// src/components/Payment.js\nimport React, { useState, useEffect } from 'react';\nimport { Container, Typography, Button, Alert } from '@mui/material';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\nconst Payment = ({ requestId, amount }) => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const navigate = useNavigate();\n  const [clientSecret, setClientSecret] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  useEffect(() => {\n    const fetchClientSecret = async () => {\n      try {\n        const response = await axios.post(\n          `${process.env.REACT_APP_BACKEND_URL}/api/payments/create-payment-intent`,\n          { requestId },\n          { headers: { 'x-auth-token': localStorage.getItem('token') } }\n        );\n        setClientSecret(response.data.clientSecret);\n      } catch (err) {\n        setError('Error initializing payment');\n      }\n    };\n    fetchClientSecret();\n  }, [requestId]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!stripe || !elements) return;\n\n    const cardElement = elements.getElement(CardElement);\n    const { error, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: cardElement,\n      },\n    });\n\n    if (error) {\n      setError(error.message);\n    } else if (paymentIntent.status === 'succeeded') {\n      setSuccess('Payment successful!');\n      setTimeout(() => navigate('/client-dashboard'), 2000);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" style={{ marginTop: '2rem' }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Make Payment\n      </Typography>\n      <Typography variant=\"h6\">Amount: ${amount}</Typography>\n      {error && <Alert severity=\"error\">{error}</Alert>}\n      {success && <Alert severity=\"success\">{success}</Alert>}\n      <form onSubmit={handleSubmit}>\n        <CardElement\n          options={{\n            style: {\n              base: {\n                fontSize: '16px',\n                color: '#424770',\n                '::placeholder': { color: '#aab7c4' },\n              },\n              invalid: { color: '#9e2146' },\n            },\n          }}\n        />\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          color=\"primary\"\n          fullWidth\n          disabled={!stripe || !clientSecret}\n          style={{ marginTop: '1rem' }}\n        >\n          Pay\n        </Button>\n      </form>\n    </Container>\n  );\n};\n\nexport default Payment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}