{"ast":null,"code":"// src/components/RegisterWorker.js\nimport React from'react';import{TextField,Button,Container,Typography,Alert}from'@mui/material';import axios from'axios';import{useNavigate}from'react-router-dom';import{Formik,Form,Field}from'formik';import*as Yup from'yup';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterWorker=()=>{const navigate=useNavigate();const validationSchema=Yup.object({email:Yup.string().email('Invalid email').required('Required'),username:Yup.string().required('Required'),password:Yup.string().min(6,'Password must be at least 6 characters').required('Required'),skills:Yup.string().required('Required'),qualifications:Yup.string().required('Required')});return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Register as Worker\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{email:'',username:'',password:'',skills:'',qualifications:'',error:'',success:''},validationSchema:validationSchema,onSubmit:async(values,_ref)=>{let{setFieldError,setFieldValue}=_ref;try{const userResponse=await axios.post('http://localhost:5000/api/auth/register',{email:values.email,username:values.username,password:values.password,role:'worker'});await axios.post('http://localhost:5000/api/workers',{skills:values.skills.split(',').map(s=>({title:s.trim(),level:'Intermediate',description:''})),qualifications:values.qualifications.split(',').map(q=>({title:q.trim(),country:'Unknown',center:'Unknown',startdate:new Date(),enddate:new Date(),description:''})),experience:[]},{headers:{'x-auth-token':userResponse.data.token}});setFieldValue('success','Worker account created successfully! Please log in.');setTimeout(()=>navigate('/login'),2000);}catch(err){var _err$response,_err$response$data;setFieldError('error',((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||'Error creating account');}},children:_ref2=>{let{errors,touched,values}=_ref2;return/*#__PURE__*/_jsxs(Form,{children:[errors.error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errors.error}),values.success&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",children:values.success}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Email\",name:\"email\",fullWidth:true,margin:\"normal\",error:touched.email&&!!errors.email,helperText:touched.email&&errors.email}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Username\",name:\"username\",fullWidth:true,margin:\"normal\",error:touched.username&&!!errors.username,helperText:touched.username&&errors.username}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Password\",name:\"password\",type:\"password\",fullWidth:true,margin:\"normal\",error:touched.password&&!!errors.password,helperText:touched.password&&errors.password}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Skills (comma-separated)\",name:\"skills\",fullWidth:true,margin:\"normal\",error:touched.skills&&!!errors.skills,helperText:touched.skills&&errors.skills}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Qualifications (comma-separated)\",name:\"qualifications\",fullWidth:true,margin:\"normal\",error:touched.qualifications&&!!errors.qualifications,helperText:touched.qualifications&&errors.qualifications}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,children:\"Register\"})]});}})]});};export default RegisterWorker;","map":{"version":3,"names":["React","TextField","Button","Container","Typography","Alert","axios","useNavigate","Formik","Form","Field","Yup","jsx","_jsx","jsxs","_jsxs","RegisterWorker","navigate","validationSchema","object","email","string","required","username","password","min","skills","qualifications","maxWidth","style","marginTop","children","variant","gutterBottom","initialValues","error","success","onSubmit","values","_ref","setFieldError","setFieldValue","userResponse","post","role","split","map","s","title","trim","level","description","q","country","center","startdate","Date","enddate","experience","headers","data","token","setTimeout","err","_err$response","_err$response$data","response","msg","_ref2","errors","touched","severity","as","label","name","fullWidth","margin","helperText","type","color"],"sources":["/Users/macm1/Documents/JobSkill-App/frontend/src/components/RegisterWorker.js"],"sourcesContent":["// src/components/RegisterWorker.js\nimport React from 'react';\nimport { TextField, Button, Container, Typography, Alert } from '@mui/material';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { Formik, Form, Field } from 'formik';\nimport * as Yup from 'yup';\n\nconst RegisterWorker = () => {\n  const navigate = useNavigate();\n\n  const validationSchema = Yup.object({\n    email: Yup.string().email('Invalid email').required('Required'),\n    username: Yup.string().required('Required'),\n    password: Yup.string().min(6, 'Password must be at least 6 characters').required('Required'),\n    skills: Yup.string().required('Required'),\n    qualifications: Yup.string().required('Required'),\n  });\n\n  return (\n    <Container maxWidth=\"sm\" style={{ marginTop: '2rem' }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Register as Worker\n      </Typography>\n      <Formik\n        initialValues={{\n          email: '',\n          username: '',\n          password: '',\n          skills: '',\n          qualifications: '',\n          error: '',\n          success: '',\n        }}\n        validationSchema={validationSchema}\n        onSubmit={async (values, { setFieldError, setFieldValue }) => {\n          try {\n            const userResponse = await axios.post('http://localhost:5000/api/auth/register', {\n              email: values.email,\n              username: values.username,\n              password: values.password,\n              role: 'worker',\n            });\n\n            await axios.post(\n              'http://localhost:5000/api/workers',\n              {\n                skills: values.skills.split(',').map(s => ({ title: s.trim(), level: 'Intermediate', description: '' })),\n                qualifications: values.qualifications.split(',').map(q => ({\n                  title: q.trim(),\n                  country: 'Unknown',\n                  center: 'Unknown',\n                  startdate: new Date(),\n                  enddate: new Date(),\n                  description: '',\n                })),\n                experience: [],\n              },\n              { headers: { 'x-auth-token': userResponse.data.token } }\n            );\n\n            setFieldValue('success', 'Worker account created successfully! Please log in.');\n            setTimeout(() => navigate('/login'), 2000);\n          } catch (err) {\n            setFieldError('error', err.response?.data?.msg || 'Error creating account');\n          }\n        }}\n      >\n        {({ errors, touched, values }) => (\n          <Form>\n            {errors.error && <Alert severity=\"error\">{errors.error}</Alert>}\n            {values.success && <Alert severity=\"success\">{values.success}</Alert>}\n            <Field\n              as={TextField}\n              label=\"Email\"\n              name=\"email\"\n              fullWidth\n              margin=\"normal\"\n              error={touched.email && !!errors.email}\n              helperText={touched.email && errors.email}\n            />\n            <Field\n              as={TextField}\n              label=\"Username\"\n              name=\"username\"\n              fullWidth\n              margin=\"normal\"\n              error={touched.username && !!errors.username}\n              helperText={touched.username && errors.username}\n            />\n            <Field\n              as={TextField}\n              label=\"Password\"\n              name=\"password\"\n              type=\"password\"\n              fullWidth\n              margin=\"normal\"\n              error={touched.password && !!errors.password}\n              helperText={touched.password && errors.password}\n            />\n            <Field\n              as={TextField}\n              label=\"Skills (comma-separated)\"\n              name=\"skills\"\n              fullWidth\n              margin=\"normal\"\n              error={touched.skills && !!errors.skills}\n              helperText={touched.skills && errors.skills}\n            />\n            <Field\n              as={TextField}\n              label=\"Qualifications (comma-separated)\"\n              name=\"qualifications\"\n              fullWidth\n              margin=\"normal\"\n              error={touched.qualifications && !!errors.qualifications}\n              helperText={touched.qualifications && errors.qualifications}\n            />\n            <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>\n              Register\n            </Button>\n          </Form>\n        )}\n      </Formik>\n    </Container>\n  );\n};\n\nexport default RegisterWorker;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}