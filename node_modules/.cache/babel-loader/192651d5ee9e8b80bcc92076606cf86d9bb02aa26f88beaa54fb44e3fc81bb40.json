{"ast":null,"code":"// src/pages/ClientDashboard.js\nimport React,{useEffect,useState,useContext}from'react';import{Container,Typography,List,ListItem,ListItemText,Button}from'@mui/material';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ClientDashboard=()=>{const[workers,setWorkers]=useState([]);const{user}=useContext(AuthContext);const navigate=useNavigate();useEffect(()=>{const fetchWorkers=async()=>{try{const response=await axios.get('http://localhost:5000/api/workers',{headers:{'x-auth-token':localStorage.getItem('token')}});setWorkers(response.data);}catch(err){console.error(err);}};fetchWorkers();},[]);const handleChat=async workerId=>{try{const response=await axios.post('http://localhost:5000/api/chats',{workerId},{headers:{'x-auth-token':localStorage.getItem('token')}});navigate(`/chat/${response.data._id}`);}catch(err){console.error(err);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Client Dashboard\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",component:Link,to:\"/request-service\",children:\"Request a Service\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{marginTop:'2rem'},children:\"Available Workers\"}),/*#__PURE__*/_jsx(List,{children:workers.map(worker=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:worker.user.username,secondary:`Skills: ${worker.skills.map(s=>s.title).join(', ')}`}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>handleChat(worker.user._id),children:\"Chat with Worker\"})]},worker._id))})]});};export default ClientDashboard;","map":{"version":3,"names":["React","useEffect","useState","useContext","Container","Typography","List","ListItem","ListItemText","Button","Link","useNavigate","axios","AuthContext","jsx","_jsx","jsxs","_jsxs","ClientDashboard","workers","setWorkers","user","navigate","fetchWorkers","response","get","headers","localStorage","getItem","data","err","console","error","handleChat","workerId","post","_id","maxWidth","style","marginTop","children","variant","gutterBottom","color","component","to","map","worker","primary","username","secondary","skills","s","title","join","onClick"],"sources":["/Users/macm1/Documents/JobSkill-App/frontend/src/pages/ClientDashboard.js"],"sourcesContent":["// src/pages/ClientDashboard.js\nimport React, { useEffect, useState, useContext } from 'react';\nimport { Container, Typography, List, ListItem, ListItemText, Button } from '@mui/material';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { AuthContext } from '../context/AuthContext';\n\nconst ClientDashboard = () => {\n  const [workers, setWorkers] = useState([]);\n  const { user } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchWorkers = async () => {\n      try {\n        const response = await axios.get('http://localhost:5000/api/workers', {\n          headers: { 'x-auth-token': localStorage.getItem('token') },\n        });\n        setWorkers(response.data);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchWorkers();\n  }, []);\n\n  const handleChat = async (workerId) => {\n    try {\n      const response = await axios.post(\n        'http://localhost:5000/api/chats',\n        { workerId },\n        { headers: { 'x-auth-token': localStorage.getItem('token') } }\n      );\n      navigate(`/chat/${response.data._id}`);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"md\" style={{ marginTop: '2rem' }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Client Dashboard\n      </Typography>\n      <Button variant=\"contained\" color=\"primary\" component={Link} to=\"/request-service\">\n        Request a Service\n      </Button>\n      <Typography variant=\"h6\" style={{ marginTop: '2rem' }}>\n        Available Workers\n      </Typography>\n      <List>\n        {workers.map((worker) => (\n          <ListItem key={worker._id}>\n            <ListItemText\n              primary={worker.user.username}\n              secondary={`Skills: ${worker.skills.map(s => s.title).join(', ')}`}\n            />\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => handleChat(worker.user._id)}\n            >\n              Chat with Worker\n            </Button>\n          </ListItem>\n        ))}\n      </List>\n    </Container>\n  );\n};\n\nexport default ClientDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}