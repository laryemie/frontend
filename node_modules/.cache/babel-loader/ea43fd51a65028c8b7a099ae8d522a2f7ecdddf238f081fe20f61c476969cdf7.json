{"ast":null,"code":"// src/components/Login.js\nimport React,{useContext}from'react';import{TextField,Button,Container,Typography,Alert,Card,CardContent}from'@mui/material';import{useNavigate}from'react-router-dom';import{AuthContext}from'../context/AuthContext';import{Formik,Form,Field}from'formik';import*as Yup from'yup';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const{login}=useContext(AuthContext);const navigate=useNavigate();const validationSchema=Yup.object({email:Yup.string().email('Invalid email').required('Required'),password:Yup.string().required('Required')});return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",style:{marginTop:'2rem'},children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,align:\"center\",children:\"Login\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{email:'',password:'',error:''},validationSchema:validationSchema,onSubmit:async(values,_ref)=>{let{setFieldError}=_ref;try{const user=await login(values.email,values.password);if(user.role==='worker'){navigate('/worker-dashboard');}else if(user.role==='client'){navigate('/client-dashboard');}else if(user.role==='admin'){navigate('/admin-dashboard');}}catch(err){setFieldError('error',err.message);if(err.message.includes('Account locked')){navigate('/reset-password');}}},children:_ref2=>{let{errors,touched,values}=_ref2;return/*#__PURE__*/_jsxs(Form,{children:[errors.error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errors.error}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Email\",name:\"email\",fullWidth:true,margin:\"normal\",variant:\"outlined\",error:touched.email&&!!errors.email,helperText:touched.email&&errors.email}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Password\",name:\"password\",type:\"password\",fullWidth:true,margin:\"normal\",variant:\"outlined\",error:touched.password&&!!errors.password,helperText:touched.password&&errors.password}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,sx:{mt:2},children:\"Login\"})]});}})]})})});};export default Login;","map":{"version":3,"names":["React","useContext","TextField","Button","Container","Typography","Alert","Card","CardContent","useNavigate","AuthContext","Formik","Form","Field","Yup","jsx","_jsx","jsxs","_jsxs","Login","login","navigate","validationSchema","object","email","string","required","password","maxWidth","style","marginTop","children","variant","gutterBottom","align","initialValues","error","onSubmit","values","_ref","setFieldError","user","role","err","message","includes","_ref2","errors","touched","severity","as","label","name","fullWidth","margin","helperText","type","color","sx","mt"],"sources":["/Users/macm1/Documents/JobSkill-App/frontend/src/components/Login.js"],"sourcesContent":["// src/components/Login.js\nimport React, { useContext } from 'react';\nimport { TextField, Button, Container, Typography, Alert, Card, CardContent } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport { Formik, Form, Field } from 'formik';\nimport * as Yup from 'yup';\n\nconst Login = () => {\n  const { login } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const validationSchema = Yup.object({\n    email: Yup.string().email('Invalid email').required('Required'),\n    password: Yup.string().required('Required'),\n  });\n\n  return (\n    <Container maxWidth=\"sm\" style={{ marginTop: '2rem' }}>\n      <Card>\n        <CardContent>\n          <Typography variant=\"h4\" gutterBottom align=\"center\">\n            Login\n          </Typography>\n          <Formik\n            initialValues={{ email: '', password: '', error: '' }}\n            validationSchema={validationSchema}\n            onSubmit={async (values, { setFieldError }) => {\n              try {\n                const user = await login(values.email, values.password);\n                if (user.role === 'worker') {\n                  navigate('/worker-dashboard');\n                } else if (user.role === 'client') {\n                  navigate('/client-dashboard');\n                } else if (user.role === 'admin') {\n                  navigate('/admin-dashboard');\n                }\n              } catch (err) {\n                setFieldError('error', err.message);\n                if (err.message.includes('Account locked')) {\n                  navigate('/reset-password');\n                }\n              }\n            }}\n          >\n            {({ errors, touched, values }) => (\n              <Form>\n                {errors.error && <Alert severity=\"error\">{errors.error}</Alert>}\n                <Field\n                  as={TextField}\n                  label=\"Email\"\n                  name=\"email\"\n                  fullWidth\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  error={touched.email && !!errors.email}\n                  helperText={touched.email && errors.email}\n                />\n                <Field\n                  as={TextField}\n                  label=\"Password\"\n                  name=\"password\"\n                  type=\"password\"\n                  fullWidth\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  error={touched.password && !!errors.password}\n                  helperText={touched.password && errors.password}\n                />\n                <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth sx={{ mt: 2 }}>\n                  Login\n                </Button>\n              </Form>\n            )}\n          </Formik>\n        </CardContent>\n      </Card>\n    </Container>\n  );\n};\n\nexport default Login;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,SAAS,CAAEC,MAAM,CAAEC,SAAS,CAAEC,UAAU,CAAEC,KAAK,CAAEC,IAAI,CAAEC,WAAW,KAAQ,eAAe,CAClG,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,KAAQ,wBAAwB,CACpD,OAASC,MAAM,CAAEC,IAAI,CAAEC,KAAK,KAAQ,QAAQ,CAC5C,MAAO,GAAK,CAAAC,GAAG,KAAM,KAAK,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3B,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAAEC,KAAM,CAAC,CAAGnB,UAAU,CAACS,WAAW,CAAC,CACzC,KAAM,CAAAW,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAa,gBAAgB,CAAGR,GAAG,CAACS,MAAM,CAAC,CAClCC,KAAK,CAAEV,GAAG,CAACW,MAAM,CAAC,CAAC,CAACD,KAAK,CAAC,eAAe,CAAC,CAACE,QAAQ,CAAC,UAAU,CAAC,CAC/DC,QAAQ,CAAEb,GAAG,CAACW,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,UAAU,CAC5C,CAAC,CAAC,CAEF,mBACEV,IAAA,CAACZ,SAAS,EAACwB,QAAQ,CAAC,IAAI,CAACC,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAC,QAAA,cACpDf,IAAA,CAACT,IAAI,EAAAwB,QAAA,cACHb,KAAA,CAACV,WAAW,EAAAuB,QAAA,eACVf,IAAA,CAACX,UAAU,EAAC2B,OAAO,CAAC,IAAI,CAACC,YAAY,MAACC,KAAK,CAAC,QAAQ,CAAAH,QAAA,CAAC,OAErD,CAAY,CAAC,cACbf,IAAA,CAACL,MAAM,EACLwB,aAAa,CAAE,CAAEX,KAAK,CAAE,EAAE,CAAEG,QAAQ,CAAE,EAAE,CAAES,KAAK,CAAE,EAAG,CAAE,CACtDd,gBAAgB,CAAEA,gBAAiB,CACnCe,QAAQ,CAAE,KAAAA,CAAOC,MAAM,CAAAC,IAAA,GAAwB,IAAtB,CAAEC,aAAc,CAAC,CAAAD,IAAA,CACxC,GAAI,CACF,KAAM,CAAAE,IAAI,CAAG,KAAM,CAAArB,KAAK,CAACkB,MAAM,CAACd,KAAK,CAAEc,MAAM,CAACX,QAAQ,CAAC,CACvD,GAAIc,IAAI,CAACC,IAAI,GAAK,QAAQ,CAAE,CAC1BrB,QAAQ,CAAC,mBAAmB,CAAC,CAC/B,CAAC,IAAM,IAAIoB,IAAI,CAACC,IAAI,GAAK,QAAQ,CAAE,CACjCrB,QAAQ,CAAC,mBAAmB,CAAC,CAC/B,CAAC,IAAM,IAAIoB,IAAI,CAACC,IAAI,GAAK,OAAO,CAAE,CAChCrB,QAAQ,CAAC,kBAAkB,CAAC,CAC9B,CACF,CAAE,MAAOsB,GAAG,CAAE,CACZH,aAAa,CAAC,OAAO,CAAEG,GAAG,CAACC,OAAO,CAAC,CACnC,GAAID,GAAG,CAACC,OAAO,CAACC,QAAQ,CAAC,gBAAgB,CAAC,CAAE,CAC1CxB,QAAQ,CAAC,iBAAiB,CAAC,CAC7B,CACF,CACF,CAAE,CAAAU,QAAA,CAEDe,KAAA,MAAC,CAAEC,MAAM,CAAEC,OAAO,CAAEV,MAAO,CAAC,CAAAQ,KAAA,oBAC3B5B,KAAA,CAACN,IAAI,EAAAmB,QAAA,EACFgB,MAAM,CAACX,KAAK,eAAIpB,IAAA,CAACV,KAAK,EAAC2C,QAAQ,CAAC,OAAO,CAAAlB,QAAA,CAAEgB,MAAM,CAACX,KAAK,CAAQ,CAAC,cAC/DpB,IAAA,CAACH,KAAK,EACJqC,EAAE,CAAEhD,SAAU,CACdiD,KAAK,CAAC,OAAO,CACbC,IAAI,CAAC,OAAO,CACZC,SAAS,MACTC,MAAM,CAAC,QAAQ,CACftB,OAAO,CAAC,UAAU,CAClBI,KAAK,CAAEY,OAAO,CAACxB,KAAK,EAAI,CAAC,CAACuB,MAAM,CAACvB,KAAM,CACvC+B,UAAU,CAAEP,OAAO,CAACxB,KAAK,EAAIuB,MAAM,CAACvB,KAAM,CAC3C,CAAC,cACFR,IAAA,CAACH,KAAK,EACJqC,EAAE,CAAEhD,SAAU,CACdiD,KAAK,CAAC,UAAU,CAChBC,IAAI,CAAC,UAAU,CACfI,IAAI,CAAC,UAAU,CACfH,SAAS,MACTC,MAAM,CAAC,QAAQ,CACftB,OAAO,CAAC,UAAU,CAClBI,KAAK,CAAEY,OAAO,CAACrB,QAAQ,EAAI,CAAC,CAACoB,MAAM,CAACpB,QAAS,CAC7C4B,UAAU,CAAEP,OAAO,CAACrB,QAAQ,EAAIoB,MAAM,CAACpB,QAAS,CACjD,CAAC,cACFX,IAAA,CAACb,MAAM,EAACqD,IAAI,CAAC,QAAQ,CAACxB,OAAO,CAAC,WAAW,CAACyB,KAAK,CAAC,SAAS,CAACJ,SAAS,MAACK,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAA5B,QAAA,CAAC,OAEnF,CAAQ,CAAC,EACL,CAAC,EACR,CACK,CAAC,EACE,CAAC,CACV,CAAC,CACE,CAAC,CAEhB,CAAC,CAED,cAAe,CAAAZ,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}