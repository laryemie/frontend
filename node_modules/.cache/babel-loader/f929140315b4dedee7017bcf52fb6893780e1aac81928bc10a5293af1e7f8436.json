{"ast":null,"code":"// src/pages/WorkerDashboard.js\nimport React,{useEffect,useState,useContext}from'react';import{Container,Typography,List,ListItem,ListItemText,Button}from'@mui/material';import axios from'axios';import{useNavigate}from'react-router-dom';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkerDashboard=()=>{const[requests,setRequests]=useState([]);const{user}=useContext(AuthContext);const navigate=useNavigate();useEffect(()=>{const fetchRequests=async()=>{try{const response=await axios.get('http://localhost:5000/api/requests',{headers:{'x-auth-token':localStorage.getItem('token')}});setRequests(response.data);}catch(err){console.error(err);}};fetchRequests();},[]);const handleChat=async clientId=>{try{const response=await axios.post('http://localhost:5000/api/chats',{workerId:user.id},{headers:{'x-auth-token':localStorage.getItem('token')}});navigate(`/chat/${response.data._id}`);}catch(err){console.error(err);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Worker Dashboard\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Available Service Requests\"}),/*#__PURE__*/_jsx(List,{children:requests.map(request=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:request.description,secondary:`Price: ${request.proposedPrice} | Address: ${request.address}`}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>handleChat(request.client._id),children:\"Chat with Client\"})]},request._id))})]});};export default WorkerDashboard;","map":{"version":3,"names":["React","useEffect","useState","useContext","Container","Typography","List","ListItem","ListItemText","Button","axios","useNavigate","AuthContext","jsx","_jsx","jsxs","_jsxs","WorkerDashboard","requests","setRequests","user","navigate","fetchRequests","response","get","headers","localStorage","getItem","data","err","console","error","handleChat","clientId","post","workerId","id","_id","maxWidth","style","marginTop","children","variant","gutterBottom","map","request","primary","description","secondary","proposedPrice","address","color","onClick","client"],"sources":["/Users/macm1/Documents/JobSkill-App/frontend/src/pages/WorkerDashboard.js"],"sourcesContent":["// src/pages/WorkerDashboard.js\nimport React, { useEffect, useState, useContext } from 'react';\nimport { Container, Typography, List, ListItem, ListItemText, Button } from '@mui/material';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\n\nconst WorkerDashboard = () => {\n  const [requests, setRequests] = useState([]);\n  const { user } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchRequests = async () => {\n      try {\n        const response = await axios.get('http://localhost:5000/api/requests', {\n          headers: { 'x-auth-token': localStorage.getItem('token') },\n        });\n        setRequests(response.data);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchRequests();\n  }, []);\n\n  const handleChat = async (clientId) => {\n    try {\n      const response = await axios.post(\n        'http://localhost:5000/api/chats',\n        { workerId: user.id },\n        { headers: { 'x-auth-token': localStorage.getItem('token') } }\n      );\n      navigate(`/chat/${response.data._id}`);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"md\" style={{ marginTop: '2rem' }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Worker Dashboard\n      </Typography>\n      <Typography variant=\"h6\">Available Service Requests</Typography>\n      <List>\n        {requests.map((request) => (\n          <ListItem key={request._id}>\n            <ListItemText\n              primary={request.description}\n              secondary={`Price: ${request.proposedPrice} | Address: ${request.address}`}\n            />\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => handleChat(request.client._id)}\n            >\n              Chat with Client\n            </Button>\n          </ListItem>\n        ))}\n      </List>\n    </Container>\n  );\n};\n\nexport default WorkerDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}