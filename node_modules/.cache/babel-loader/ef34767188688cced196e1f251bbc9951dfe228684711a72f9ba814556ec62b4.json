{"ast":null,"code":"// src/components/Login.js\nimport React,{useContext}from'react';import{TextField,Button,Container,Typography,Alert}from'@mui/material';import{useNavigate}from'react-router-dom';import{AuthContext}from'../context/AuthContext';import{Formik,Form,Field}from'formik';import*as Yup from'yup';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const{login}=useContext(AuthContext);const navigate=useNavigate();const validationSchema=Yup.object({email:Yup.string().email('Invalid email').required('Required'),password:Yup.string().required('Required')});return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Login\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{email:'',password:'',error:''},validationSchema:validationSchema,onSubmit:async(values,_ref)=>{let{setFieldError}=_ref;try{const user=await login(values.email,values.password);if(user.role==='worker'){navigate('/worker-dashboard');}else{navigate('/client-dashboard');}}catch(err){setFieldError('error',err.message);if(err.message.includes('Account locked')){navigate('/reset-password');}}},children:_ref2=>{let{errors,touched,values}=_ref2;return/*#__PURE__*/_jsxs(Form,{children:[errors.error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errors.error}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Email\",name:\"email\",fullWidth:true,margin:\"normal\",error:touched.email&&!!errors.email,helperText:touched.email&&errors.email}),/*#__PURE__*/_jsx(Field,{as:TextField,label:\"Password\",name:\"password\",type:\"password\",fullWidth:true,margin:\"normal\",error:touched.password&&!!errors.password,helperText:touched.password&&errors.password}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,children:\"Login\"})]});}})]});};export default Login;","map":{"version":3,"names":["React","useContext","TextField","Button","Container","Typography","Alert","useNavigate","AuthContext","Formik","Form","Field","Yup","jsx","_jsx","jsxs","_jsxs","Login","login","navigate","validationSchema","object","email","string","required","password","maxWidth","style","marginTop","children","variant","gutterBottom","initialValues","error","onSubmit","values","_ref","setFieldError","user","role","err","message","includes","_ref2","errors","touched","severity","as","label","name","fullWidth","margin","helperText","type","color"],"sources":["/Users/macm1/Documents/JobSkill-App/frontend/src/components/Login.js"],"sourcesContent":["// src/components/Login.js\nimport React, { useContext } from 'react';\nimport { TextField, Button, Container, Typography, Alert } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport { Formik, Form, Field } from 'formik';\nimport * as Yup from 'yup';\n\nconst Login = () => {\n  const { login } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const validationSchema = Yup.object({\n    email: Yup.string().email('Invalid email').required('Required'),\n    password: Yup.string().required('Required'),\n  });\n\n  return (\n    <Container maxWidth=\"sm\" style={{ marginTop: '2rem' }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Login\n      </Typography>\n      <Formik\n        initialValues={{ email: '', password: '', error: '' }}\n        validationSchema={validationSchema}\n        onSubmit={async (values, { setFieldError }) => {\n          try {\n            const user = await login(values.email, values.password);\n            if (user.role === 'worker') {\n              navigate('/worker-dashboard');\n            } else {\n              navigate('/client-dashboard');\n            }\n          } catch (err) {\n            setFieldError('error', err.message);\n            if (err.message.includes('Account locked')) {\n              navigate('/reset-password');\n            }\n          }\n        }}\n      >\n        {({ errors, touched, values }) => (\n          <Form>\n            {errors.error && <Alert severity=\"error\">{errors.error}</Alert>}\n            <Field\n              as={TextField}\n              label=\"Email\"\n              name=\"email\"\n              fullWidth\n              margin=\"normal\"\n              error={touched.email && !!errors.email}\n              helperText={touched.email && errors.email}\n            />\n            <Field\n              as={TextField}\n              label=\"Password\"\n              name=\"password\"\n              type=\"password\"\n              fullWidth\n              margin=\"normal\"\n              error={touched.password && !!errors.password}\n              helperText={touched.password && errors.password}\n            />\n            <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>\n              Login\n            </Button>\n          </Form>\n        )}\n      </Formik>\n    </Container>\n  );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}